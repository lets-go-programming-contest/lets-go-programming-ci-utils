# Lets Go Programming CI Utils

## Зачем это нужно
Автоматика на курсе нужна для того, чтобы предварительно проводить тестирование работ студентов.

Все работы проверяются в 2 этапа:
- Автоматическая проверка (GitLab CI/CD)
- Ручная проверка (в рамках Code Review или в рамках практического занятия)

## Структура
| Наименонивае | Тип  | Зачем нужно                                          |
|--------------|------|------------------------------------------------------|
| deployment   | dir  | Dockerfile и все, что относится к образу             |
| utils        | dir  | **Не трогать** Файлы системы проверки                |
| Makefile     | file | **Не трогать** Файлы системы проверки                |

## Common
Статические файлы для работы с системой проверки задаются в отдельном репозитории и передаются в контейнер в качетве 
переменной окружения `COMMON_REPO_URL`.

## Этапы
Автоматизированное тестирование состоит из четырех этапов:

| Наименование этапа | Краткое описание                                                                                                                                                | Шаги этапа                                                                       |
|--------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
| sanity             | Проверка оформления работы и корректности ее публикации в рамках MR                                                                                             | sanity-branch (1.2, 3.1)<br/>sanity-student (2.1, 3.7)<br/>sanity-files (2, 3.7) |
| build              | Сборка всех сервисов для всех измененных практических работ в рамках MR                                                                                         ||
| lint               | Статический анализ исходного кода практических работ, публикуемых студентом в рамках MR. В качестве инструмента статического анализа используется golangci-lint ||
| test               | Тестирование практических работ, публикуемых студентом в рамках MR                                                                                              | unit-tests<br/>custom-tests                                                      |

> Примечание: для шагов build, lint и test на каждую практическую работу создается артефакт с описанием результатов прохождения автоматизированного тестирования, доступный как студентам, так и преподавателям курса. Журнал событий может быть использован в дальнейшем при ручной проверке практических работ.
